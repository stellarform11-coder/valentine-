<!DOCTYPE html>
<html class="dark" lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Celebration</title>

<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>

<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,1&display=swap" rel="stylesheet"/>

<script>
tailwind.config = {
  darkMode: "class",
  theme: {
    extend: {
      colors: {
        primary: "#7311d4",
        gold: "#ffd700",
        dark: "#0a0510"
      },
      fontFamily: {
        display: ["Plus Jakarta Sans", "sans-serif"]
      }
    }
  }
}
</script>

<style>
body {
  font-family: "Plus Jakarta Sans", sans-serif;
}

/* ðŸŽŠ Confetti */
.confetti {
  position: fixed;
  top: -10px;
  pointer-events: none;
  animation: fall linear forwards;
  opacity: 0.9;
}

@keyframes fall {
  to {
    transform: translateY(110vh) rotate(720deg);
    opacity: 0;
  }
}

/* ðŸ’¥ Heart Explosion */
.heart {
  position: fixed;
  font-size: 26px;
  pointer-events: none;
  animation: explode 1.8s ease-out forwards;
}

@keyframes explode {
  0% {
    transform: translate(-50%, -50%) scale(0.3);
    opacity: 1;
  }
  100% {
    transform: translate(var(--x), var(--y)) scale(1.4);
    opacity: 0;
  }
}
</style>
</head>

<body class="bg-dark text-white overflow-hidden">

<!-- ðŸŒŒ Background -->
<div class="fixed inset-0 bg-[radial-gradient(circle_at_center,#2a0552_0%,#0a0510_70%)]"></div>

<!-- ðŸ’œ Main -->
<div class="relative z-10 flex min-h-screen flex-col items-center justify-center text-center px-6">

<h1 class="text-6xl md:text-7xl font-extrabold drop-shadow-[0_0_20px_rgba(115,17,212,0.8)]">
  I love you ðŸ’œ
</h1>

<p class="mt-4 text-white/70 tracking-widest uppercase">
  Forever & Always
</p>

<!-- ðŸŽ¬ VIDEO (LOCAL FILE) -->
<div class="mt-12 w-full max-w-3xl aspect-video rounded-xl overflow-hidden shadow-2xl border border-white/10">
  <video
    id="loveVideo"
    class="w-full h-full object-cover"
    src="love.mp4"
    controls
    playsinline>
  </video>
</div>

<!-- ðŸ”™ Home -->
<button
  id="homeBtn"
  class="mt-12 px-10 py-4 rounded-full bg-white/10 hover:bg-white/20 transition-all font-bold tracking-wide border border-white/20">
  Back to Start
</button>

</div>

<!-- ðŸŽ‰ JS -->
<script>
/* ðŸŽŠ CONFETTI */
function launchConfetti(count = 120) {
  const colors = ["#7311d4", "#ffd700", "#ffffff"];

  for (let i = 0; i < count; i++) {
    const el = document.createElement("div");
    el.className = "confetti";

    const size = Math.random() * 8 + 6;
    el.style.width = size + "px";
    el.style.height = size + "px";
    el.style.left = Math.random() * 100 + "vw";
    el.style.background = colors[Math.floor(Math.random() * colors.length)];
    el.style.borderRadius = Math.random() > 0.6 ? "50%" : "2px";
    el.style.animationDuration = Math.random() * 2 + 3 + "s";

    document.body.appendChild(el);
    setTimeout(() => el.remove(), 6000);
  }
}

/* ðŸ’¥ HEART EXPLOSION */
function heartExplosion(x, y, count = 30) {
  for (let i = 0; i < count; i++) {
    const heart = document.createElement("div");
    heart.className = "heart";
    heart.innerHTML = "â¤";
    heart.style.left = x + "px";
    heart.style.top = y + "px";
    heart.style.color = Math.random() > 0.5 ? "#7311d4" : "#ffd700";

    const angle = Math.random() * Math.PI * 2;
    const distance = Math.random() * 220 + 60;

    heart.style.setProperty("--x", `${Math.cos(angle) * distance}px`);
    heart.style.setProperty("--y", `${Math.sin(angle) * distance}px`);

    document.body.appendChild(heart);
    setTimeout(() => heart.remove(), 2000);
  }
}

/* ðŸš€ TRIGGER CELEBRATION + VIDEO */
window.addEventListener("load", () => {
  // confetti wave
  launchConfetti(150);

  // heart explosion from center
  heartExplosion(window.innerWidth / 2, window.innerHeight / 2);

  // second confetti wave
  setTimeout(() => launchConfetti(80), 800);

  // play video after celebration
  setTimeout(() => {
    const video = document.getElementById("loveVideo");
    video?.play().catch(() => {});
  }, 2000);
});

/* ðŸ”™ Back Home */
document.getElementById("homeBtn").addEventListener("click", () => {
  window.location.href = "index.html";
});
</script>
<audio id="bgMusic" src="love.mp3" autoplay loop></audio>

<script>
const music = document.getElementById("bgMusic");

/* ðŸ” Restore playback position */
const savedTime = localStorage.getItem("musicTime");
if (savedTime) {
  music.currentTime = parseFloat(savedTime);
}

/* ðŸ”Š Default volume (100%) */
music.volume = 1.0;

/* ðŸŽ‰ Celebration page â†’ fade down to 20% */
if (window.location.pathname.includes("celebrate")) {
  let currentVolume = music.volume;

  const fadeDown = setInterval(() => {
    if (currentVolume > 0.2) {
      currentVolume -= 0.02;
      music.volume = Math.max(currentVolume, 0.2);
    } else {
      music.volume = 0.2;
      clearInterval(fadeDown);
    }
  }, 100);
}

/* ðŸ’¾ Save playback time continuously */
setInterval(() => {
  if (!music.paused) {
    localStorage.setItem("musicTime", music.currentTime);
  }
}, 500);

/* ðŸ”“ Autoplay unlock (required by browsers) */
document.addEventListener("click", () => {
  if (music.paused) {
    music.play();
  }
}, { once: true });
</script>
</body>
</html>